<div class="container">







   {{>sidebar_directeur}}
   <div class="main-container">
  <h1>👋🏼 Hey {{ meta.firstname }}, Welkom Terug!</h1>
{{!-- <p>U bent een {{user.role.label}}.</p> --}}
        <div class="icon-card" >
      <div class="icon-card--label">
         <a href="/allevakken"><h3>Vakken</h3></a>
      </div>
      <div class="icon-card--img">
        <img src="/images/icons/vakken.png" alt="vakken"  />
      </div>
    </div>
        <div class="icon-card" >
      <div class="icon-card--label">
         <a href="/alleklassen"><h3>Klassen</h3></a>
      </div>
      <div class="icon-card--img">
        <img src="/images/icons/vakken.png" alt="vakken"  />
      </div>
    </div>


<div class="search">
<h2>De gebruikers</h2>
<form action="#" method="post" id="formSearch">
  <label for="searchUser"></label>
  <input id="searchUser" name="searchUser" type="text" placeholder="Search">
  <button type="submit">Search</button>
</form>

<ul id="result" class="search__result"></ul>
</div>

</div>
</div>

<script>
document.getElementById('formSearch').addEventListener('submit', function(event) {
  event.preventDefault(); // Prevent the form from submitting normally

  var searchValue = document.getElementById('searchUser').value; // Get the search query from the input field

  fetch('http://localhost:5000/api/users/firstname/' + (searchValue))
    .then(function(response) {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error('Error: ' + response.status);
      }
    })
    .then(function(data) {

      // console.log(data); 
      renderUsers(data); 
    })
    .catch(function(error) {
      // console.log(error); // Handle any errors
    });
});

async function renderUsers(users) {
  const $result = document.getElementById("result");
  $result.innerHTML = users
    .map((user) => {
      return `
      <li class="card" data-username="${user.id}">
        <a href="/user/${user.id}">
        <img src="${user.meta.avatar}" alt="">
        <h4>${user.meta.firstname} ${user.meta.lastname}</h4>
        <h5>${user.role.label}</h5>
        <h6>${user.classrooms.map(
          (clas) => {
            return `${clas.label}`;
          }
        ).join("")}</h6></a></li>
      `;
    })
    .join("");
}


</script>